#!/bin/sh

echo "â³ Attente du dÃ©marrage de Debezium..."
sleep 15

echo "ğŸ“¡ VÃ©rification du connecteur existant..."
EXISTS=$(curl -s http://connect:8083/connectors | grep ticket-postgres-connector)

if [ -z "$EXISTS" ]; then
  echo "ğŸš€ CrÃ©ation du connecteur Debezium PostgreSQL..."
  curl -X POST -H "Content-Type: application/json" --data @/kafka/init/postgres-connector.json http://connect:8083/connectors
else
  echo "âœ… Le connecteur existe dÃ©jÃ . Pas de crÃ©ation nÃ©cessaire."
fi
