<!-- profile-page.component.html -->
<div class="container profile-container">
  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10">
      <!-- Loading spinner -->
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Chargement...</span>
        </div>
        <p class="mt-2">Chargement du profil...</p>
      </div>

      <!-- Error message -->
      <div *ngIf="error" class="alert alert-danger" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        {{ error }}
        <button class="btn btn-sm btn-outline-danger ms-3" (click)="refreshProfile()">
          <i class="fas fa-redo me-1"></i>
          Réessayer
        </button>
      </div>

      <!-- Profile card -->
      <div *ngIf="!loading && !error && user" class="profile-card">
        <!-- Header avec avatar -->
        <div class="profile-header">
          <div class="profile-avatar">
            <i class="fas fa-user"></i>
          </div>
          <h2 class="mb-1">{{ user.firstname }} {{ user.lastname }}</h2>
          <p class="mb-0 opacity-75">{{ user.username }}</p>
        </div>
        
        <!-- Corps du profil -->
        <div class="profile-body">
          <div class="row">
            <!-- Informations personnelles -->
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-user"></i>
                  Prénom
                </div>
                <p class="info-value">{{ user.firstname || 'Non spécifié' }}</p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-user"></i>
                  Nom
                </div>
                <p class="info-value">{{ user.lastname || 'Non spécifié' }}</p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-envelope"></i>
                  Email
                </div>
                <p class="info-value">{{ user.email || 'Non spécifié' }}</p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-at"></i>
                  Nom d'utilisateur
                </div>
                <p class="info-value">{{ user.firstname +' '+user.lastname || 'Non spécifié' }}</p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-user-tag"></i>
                  Rôle
                </div>
                <p class="info-value">
                  <span class="badge bg-primary rounded-pill">
                    {{ user.role || 'Non défini' }}
                  </span>
                </p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">
                  <i class="fas fa-toggle-on"></i>
                  Statut du compte
                </div>
                <p class="info-value">
                  <span class="status-badge" 
                        [ngClass]="user.enable ? 'bg-success' : 'bg-danger'">
                    <i class="fas" [ngClass]="user.enable ? 'fa-check-circle' : 'fa-times-circle'"></i>
                    {{ user.enable ? 'Actif' : 'Inactif' }}
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Boutons d'action -->
        <div class="action-buttons">
          <button class="btn btn-edit me-3" (click)="editProfile()">
            <i class="fas fa-edit me-2"></i>
            Modifier le profil
          </button>
          <button class="btn btn-secondary-custom" (click)="changePassword()">
            <i class="fas fa-key me-2"></i>
            Changer le mot de passe
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
